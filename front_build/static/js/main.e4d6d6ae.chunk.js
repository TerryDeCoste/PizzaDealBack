(this.webpackJsonppizzadealfront=this.webpackJsonppizzadealfront||[]).push([[0],[,,function(e,t,a){e.exports={ItemBox:"ItemSearch_ItemBox__1QRwY",ItemName:"ItemSearch_ItemName__2pFP4",ItemSize:"ItemSearch_ItemSize__3pzSO",ItemOptions:"ItemSearch_ItemOptions__3eZjF",ItemCount:"ItemSearch_ItemCount__2dWm9",ItemRemoveButton:"ItemSearch_ItemRemoveButton__1QR52"}},function(e,t,a){e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch("http://localhost:3030"+e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()}))}},function(e,t,a){e.exports={DealBox:"DealBox_DealBox__1juT4",Logo:"DealBox_Logo__12ucV",DealName:"DealBox_DealName__6SbEo",ItemBox:"DealBox_ItemBox__1RPA_",ItemList:"DealBox_ItemList__38ZUI",PriceBox:"DealBox_PriceBox__2I840",LogoImg:"DealBox_LogoImg__24dzB",LogoLink:"DealBox_LogoLink__1nOVZ"}},function(e,t,a){e.exports={ratingBox:"StarIcons_ratingBox__3sIK3",ratingStar:"StarIcons_ratingStar__H24Uq",fullStar:"StarIcons_fullStar__1kJPl",emptyStar:"StarIcons_emptyStar__BDzJs",halfStar:"StarIcons_halfStar__1_oDP"}},function(e,t,a){e.exports={Container:"DealProviders_Container__250bD",Label:"DealProviders_Label__2H8Ws",ProviderBox:"DealProviders_ProviderBox__2ibF3",ProviderSub:"DealProviders_ProviderSub__2NrVf",Provider:"DealProviders_Provider__3YLsI",ProviderLink:"DealProviders_ProviderLink__DkJM5"}},function(e,t,a){e.exports={SearchBox:"SearchBox_SearchBox__3iMJ2",FindBar:"SearchBox_FindBar__2saXx",FindButton:"SearchBox_FindButton__fX2xk",FindOptions:"SearchBox_FindOptions__e1PXb"}},,function(e,t,a){e.exports={Container:"Layout_Container__1o8K4",TopBar:"Layout_TopBar__yPti_",Logo:"Layout_Logo__3VTaw",SubHeader:"Layout_SubHeader__3Gmcw",Content:"Layout_Content__3WRRv",Disclaimer:"Layout_Disclaimer__1Zono"}},function(e,t,a){e.exports={TopBox:"TopDeals_TopBox__3sKH_",Title:"TopDeals_Title__2Ayot",dots:"TopDeals_dots__1PNuY",dot:"TopDeals_dot__1_iJk",dotactive:"TopDeals_dotactive__3zYUK"}},,function(e,t,a){e.exports={LocationBox:"SearchOption_LocationBox__2IAWP",LocationColumns:"SearchOption_LocationColumns__3LGeK",InputField:"SearchOption_InputField__1bY1U",FindMeButton:"SearchOption_FindMeButton__2zC5J",ItemSelectors:"SearchOption_ItemSelectors__rEW2J",ItemSelectLabels:"SearchOption_ItemSelectLabels__1IvJ_"}},,,function(e,t,a){e.exports={Box:"Disclaimer_Box__1xSIO",Disclaimer:"Disclaimer_Disclaimer__xwhll",Copyright:"Disclaimer_Copyright__1iYWZ"}},function(e,t,a){e.exports={Image:"Logo_Image__2F1lL",Text:"Logo_Text__3-gba"}},,,function(e,t,a){e.exports=a.p+"static/media/Logo.2451c0e1.jpg"},,function(e,t,a){e.exports=a(28)},,,,,function(e,t,a){},,function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),i=a(18),r=a.n(i),c=(a(26),a(1)),l=a(9),s=a.n(l),u=a(19),m=a.n(u),d=a(16),p=a.n(d),_=function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement("img",{src:m.a,alt:"logo",className:p.a.Image}),o.a.createElement("h1",{className:p.a.Text},"Find My Pizza Deal!"))},f=a(15),v=a.n(f),y=function(e){return o.a.createElement("div",{className:v.a.Box},o.a.createElement("p",{className:v.a.Disclaimer},"All data is provided on an as-is basis, and prices provided here may not be honoured by the restaurants.  Please verify pricing with the restaurant prior to purchase."),o.a.createElement("p",{className:v.a.Copyright},"\xa9 ",(new Date).getFullYear()," - Terry DeCoste"))},b=function(e){return o.a.createElement("div",{className:s.a.Container},o.a.createElement("header",{className:s.a.TopBar},o.a.createElement("div",{id:"logo",className:s.a.Logo},o.a.createElement(_,null))),o.a.createElement("main",{className:s.a.Content},e.children),o.a.createElement("footer",{id:"disclaimer",className:s.a.Disclaimer},o.a.createElement(y,null)))},E=a(3),g=a.n(E),h=a(14),O=a(20),S=(a(27),a(4)),I=a.n(S),k=a(5),N=a.n(k),j=function(e){var t=e.rating||1;t<1&&(t=1);var a=[1,2,3,4,5].map((function(e){return t>e-.25?o.a.createElement("span",{key:e,className:[N.a.ratingStar,N.a.fullStar].join(" ")}):t>e-.75?o.a.createElement("span",{key:e,className:[N.a.ratingStar,N.a.halfStar].join(" ")}):o.a.createElement("span",{key:e,className:[N.a.ratingStar,N.a.emptyStar].join(" ")})}));return o.a.createElement("div",{className:N.a.ratingBox},a)},x=function(e){var t=null;return e.info.itemObjs.find((function(e){return e.option&&"premium_topping"===e.option.name}))&&(t=o.a.createElement("p",null,e.info.description)),o.a.createElement("div",{className:I.a.DealBox},o.a.createElement("div",{className:I.a.Logo},o.a.createElement("a",{href:e.info.website,className:I.a.LogoLink},o.a.createElement("img",{className:I.a.LogoImg,src:"/images/"+e.info.logo,alt:e.info.logo}))),o.a.createElement("div",{className:I.a.DealName},e.info.dealname),o.a.createElement("div",{className:I.a.ItemBox},o.a.createElement("ul",{className:I.a.ItemList},e.info.items.map((function(e,t){return o.a.createElement("li",{key:t},e)}))),t),o.a.createElement("div",{className:I.a.PriceBox},o.a.createElement("div",null,"$: ",e.info.price),o.a.createElement("div",null,"V: ",e.info.value.toFixed(1),"/5"),o.a.createElement(j,{rating:e.info.value}),o.a.createElement("div",null,e.info.distance.toFixed(1)," km")))},B=a(10),L=a.n(B),D=function(e){if(!e.deals)return null;var t=e.deals.map((function(e,t){return o.a.createElement("div",{key:t,className:"keen-slider__slide"},o.a.createElement(x,{info:e}))})),a=Object(n.useState)(!1),i=Object(c.a)(a,2),r=i[0],l=i[1],s=Object(n.useRef)(),u=Object(n.useState)(0),m=Object(c.a)(u,2),d=m[0],p=m[1],_=Object(O.useKeenSlider)({slidesPerView:2,mode:"free-snap",spacing:15,centered:!0,controls:!0,loop:!0,initial:0,slideChanged:function(e){p(e.details().relativeSlide)},duration:2e3,dragStart:function(){l(!0)},dragEnd:function(){l(!1)}}),f=Object(c.a)(_,2),v=f[0],y=f[1];return Object(n.useEffect)((function(){v.current.addEventListener("mouseover",(function(){l(!0)})),v.current.addEventListener("mouseout",(function(){l(!1)}))}),[v]),Object(n.useEffect)((function(){return s.current=setInterval((function(){!r&&y&&y.next()}),4500),function(){clearInterval(s.current)}}),[r,y]),o.a.createElement("div",{className:L.a.TopBox},o.a.createElement("div",{className:L.a.Title},"TOP DEALS IN YOUR AREA"),o.a.createElement("div",{className:"navigation-wrapper"},o.a.createElement("div",{ref:v,className:"keen-slider"},t)),y&&o.a.createElement("div",{className:L.a.dots},Object(h.a)(Array(y.details().size).keys()).map((function(e){return o.a.createElement("button",{key:e,onClick:function(){y.moveToSlideRelative(e)},className:L.a.dot+(d===e?" "+L.a.dotactive:"")})}))))},C=function(e){var t=null;return e.deals&&e.deals.length>0&&(t=e.deals.map((function(e,t){return o.a.createElement(x,{key:t,info:e})}))),t||e.initial||(t=o.a.createElement("h3",null,"No deals found, please check your criteria.")),o.a.createElement("div",null,t)},P=a(6),F=a.n(P),T=function(e){var t=null;return e.providers&&e.providers.length>0&&(t=e.providers.map((function(e,t){return o.a.createElement("li",{key:t,className:F.a.ProviderSub},o.a.createElement("a",{href:e.website,className:F.a.ProviderLink},o.a.createElement("img",{className:F.a.Provider,src:"/images/"+e.logo,alt:e.logo})))}))),null==t?null:o.a.createElement("div",{className:F.a.Container},o.a.createElement("div",{className:F.a.Label},"With deals from:"),o.a.createElement("ul",{className:F.a.ProviderBox},t))},w=a(8),z=a(7),$=a.n(z),R=a(12),J=a.n(R),M=a(2),Y=a.n(M),A=function(e,t,a){var n=[0,1,2,3,4,5,6,7,8,9,10].map((function(e){return o.a.createElement("option",{key:e,value:e},e)}));return o.a.createElement("div",{className:Y.a.ItemBox,key:a},o.a.createElement("select",{className:Y.a.ItemCount,value:e.count,onChange:function(a){!function(e,a){e.count=Number(a.target.value),t(e)}(e,a)}},n),o.a.createElement("div",{className:Y.a.ItemSize},e.size),o.a.createElement("div",{className:Y.a.ItemName},e.name),o.a.createElement("div",{className:Y.a.ItemOptions},"with"),o.a.createElement("select",{className:Y.a.ItemCount,value:e.optionCount,onChange:function(a){!function(e,a){e.optionCount=Number(a.target.value),t(e)}(e,a)}},n),o.a.createElement("div",{className:Y.a.ItemOptions},e.options,"(s)"),o.a.createElement("button",{className:Y.a.ItemRemoveButton,onClick:function(){!function(e){e.count=0,t(e)}(e)}},"x"))},W=function(e,t,a,n,i){return o.a.createElement("div",{className:Y.a.ItemSelectors},o.a.createElement("label",{htmlFor:e,className:Y.a.ItemSelectLabels},t,":"),o.a.createElement("select",{id:e,value:i,onChange:a},n))},V=function(e){var t=Object(n.useState)([]),a=Object(c.a)(t,2),i=a[0],r=a[1],l=Object(n.useState)(0),s=Object(c.a)(l,2),u=s[0],m=s[1],d=Object(n.useState)([]),p=Object(c.a)(d,2),_=p[0],f=p[1],v=Object(n.useState)(0),y=Object(c.a)(v,2),b=y[0],E=y[1],O=Object(n.useState)([]),S=Object(c.a)(O,2),I=S[0],k=S[1],N=Object(n.useState)(0),j=Object(c.a)(N,2),x=j[0],B=j[1],L=Object(n.useState)(1),D=Object(c.a)(L,2),C=D[0],P=D[1],F=Object(n.useState)(0),T=Object(c.a)(F,2),z=T[0],$=T[1];Object(n.useEffect)((function(){g()("/itemoptions").then((function(e){r(e.items),m(e.items[0].id),f(e.items[0].sizes),E(e.items[0].sizes[0].id),k(e.items[0].options),B(e.items[0].options[0].option),P(1),$(0)}))}),[]);var R=function(t){var a=e.items.map((function(e){return e.calcID===t.calcID&&(e=Object(w.a)(Object(w.a)({},e),t)),e})).filter((function(e){return e.count>0}));e.setItems(a)};if(0===i.length)return null;var J=i.map((function(e,t){return o.a.createElement("option",{key:t,value:e.id},e.name)})),M=_.map((function(e,t){return o.a.createElement("option",{key:t,value:e.id},e.display)})),V=I.map((function(e,t){return o.a.createElement("option",{key:t,value:e.option},e.display)})),K=[1,2,3,4,5,6,7,8,9,10].map((function(e,t){return o.a.createElement("option",{key:t,value:e},e)})),H=[0,1,2,3,4,5,6,7,8,9,10].map((function(e,t){return o.a.createElement("option",{key:t,value:e},e)})),U=e.items.map((function(e,t){return A(e,R,t)}));return o.a.createElement("div",null,W("item_select","Item",(function(e){var t=i.find((function(t){return t.id===Number(e.target.value)}));t&&(m(t.id),f(t.sizes),E(t.sizes[0].id),k(t.options),B(t.options[0].option),P(1),$(0))}),J,u),W("size_select","Size",(function(e){return E(Number(e.target.value))}),M,b),W("count_select","Count",(function(e){return P(Number(e.target.value))}),K,C),W("option_select","Options",(function(e){return B(e.target.value)}),V,x),W("option_count_select","OptionCount",(function(e){return $(Number(e.target.value))}),H,z),o.a.createElement("div",null,o.a.createElement("button",{id:"btn_add_item",className:Y.a.FindMeButton,onClick:function(){var t=i.find((function(e){return e.id===u})),a="id"+u+"sz"+b+"opt"+x;if(e.items.find((function(e){return e.calcID===a}))){var n=e.items.map((function(e){return e.calcID===a&&(e.count+=C,e.optionCount+=z),e}));e.setItems(n)}else{var o={calcID:a,id:t.id,name:t.name,size:t.sizes.find((function(e){return e.id===b})).display,sizeId:b,options:x,count:C,optionCount:z},r=Object(h.a)(e.items);r.push(o),e.setItems(r)}}},"Add Item")),o.a.createElement("div",{className:Y.a.ItemList},U))},K=function(e){var t,a,n,i,r,c,l=null;switch(e.type){case"number":i=e.name,r=e.onchange,c=e.value,l=o.a.createElement("input",{type:"number",name:i,min:"0",value:c,onChange:function(e){r(e.target.value)}});break;case"Dropdown":l=function(e,t,a,n){var i=t.map((function(e){return o.a.createElement("option",{key:e.key,value:e.key},e.display)}));return o.a.createElement("select",{name:e,defaultValue:n,onChange:function(e){a(e.target.value)}},i)}(e.name,e.options,e.onchange,e.value);break;case"Location":t=e.findMe,a=e.typeLocation,n=e.location,l=o.a.createElement("div",{className:J.a.LocationBox},o.a.createElement("div",{className:J.a.LocationColumns},o.a.createElement("button",{id:"btn_find_me",className:J.a.FindMeButton,onClick:t},"Find Me"),o.a.createElement("input",{type:"text",id:"location_input",className:J.a.InputField,onChange:a,value:n})));break;case"Items":l=function(e){return o.a.createElement(V,e)}(e)}return o.a.createElement("tr",null,o.a.createElement("td",null,e.display),o.a.createElement("td",null,l))},H=[{name:"Location",display:"Location",type:"Location"},{name:"PriceLimit",display:"Price Limit",type:"Dropdown",options:[{key:"all",display:"No Limit"},{key:"5",display:"$5.00"},{key:"10",display:"$10.00"},{key:"15",display:"$15.00"},{key:"20",display:"$20.00"},{key:"25",display:"$25.00"},{key:"30",display:"$30.00"},{key:"35",display:"$35.00"},{key:"40",display:"$40.00"},{key:"45",display:"$45.00"},{key:"50",display:"$50.00"},{key:"60",display:"$60.00"},{key:"70",display:"$70.00"},{key:"80",display:"$80.00"},{key:"90",display:"$90.00"},{key:"100",display:"$100.00"},{key:"150",display:"$150.00"},{key:"200",display:"$200.00"}]},{name:"Delivery",display:"Delivery Required",type:"Dropdown",options:[{key:"no",display:"No"},{key:"yes",display:"Yes"}]},{name:"OrderBy",display:"Order By",type:"Dropdown",options:[{key:"value",display:"Best Value"},{key:"price",display:"Lowest Price"},{key:"distance",display:"Closest Store"}]},{name:"Items",display:"Items",type:"Items",options:[]}],U=function(e){var t=Object(n.useState)(null),a=Object(c.a)(t,2),i=a[0],r=a[1],l=Object(n.useState)({text:"City, Province or Postal Code",latitude:42.959622,longitude:-81.228499}),s=Object(c.a)(l,2),u=s[0],m=s[1],d=Object(n.useState)("all"),p=Object(c.a)(d,2),_=p[0],f=p[1],v=Object(n.useState)("no"),y=Object(c.a)(v,2),b=y[0],E=y[1],h=Object(n.useState)("value"),O=Object(c.a)(h,2),S=O[0],I=O[1],k=Object(n.useState)([]),N=Object(c.a)(k,2),j=N[0],x=N[1],B=function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(e){var t=e.coords.latitude,a=e.coords.longitude;g()("/location",{searchType:"latlon",searchLat:t,searchLon:a}).then((function(e){var n={text:e.city+", "+e.province,latitude:t,longitude:a};m(n),F("location",n)})).catch((function(e){console.log(e)}))}))},L=function(e){var t=e.target.value;i&&clearTimeout(i),m(Object(w.a)(Object(w.a)({},u),{},{text:t})),r(setTimeout((function(){!function(e){g()("/location",{searchType:"text",searchString:e}).then((function(e){var t={text:e.city+", "+e.province,latitude:e.latitude,longitude:e.longitude};m(t),F("location",t)}))}(t)}),1500))},D=H.map((function(e,t){switch(e.name){case"Location":return o.a.createElement(K,Object.assign({key:t,location:u.text,findMe:B,typeLocation:L},e));case"PriceLimit":return o.a.createElement(K,Object.assign({key:t,onchange:f,value:_},e));case"Delivery":return o.a.createElement(K,Object.assign({key:t,onchange:E,value:b},e));case"OrderBy":return o.a.createElement(K,Object.assign({key:t,onchange:I,value:S},e));case"Items":return o.a.createElement(K,Object.assign({key:t,items:j,setItems:x},e));default:return null}})),C=e.searchDisplay?o.a.createElement(o.a.Fragment,null,o.a.createElement("table",{className:$.a.FindOptions},o.a.createElement("tbody",null,D)),o.a.createElement("div",{className:$.a.FindBar},o.a.createElement("div",null),o.a.createElement("div",null,o.a.createElement("button",{className:$.a.FindButton,onClick:e.searchClick},"Find It!")))):null,P=e.setSearchCriteria,F=Object(n.useCallback)((function(){P({location:u,priceLimit:_,deliveryRequired:b,orderBy:S,items:j})}),[P,u,_,b,S,j]);return Object(n.useEffect)((function(){F()}),[F]),o.a.createElement("div",{className:$.a.SearchBox},o.a.createElement("div",{className:$.a.FindBar},o.a.createElement("div",null,"Find Your Deal:"),o.a.createElement("div",null,o.a.createElement("button",{className:$.a.FindButton,onClick:e.searchClick},"Find It!"))),C)},Z=function(e){var t=Object(n.useState)(null),a=Object(c.a)(t,2),i=a[0],r=a[1],l=Object(n.useState)(null),s=Object(c.a)(l,2),u=s[0],m=s[1],d=Object(n.useState)(null),p=Object(c.a)(d,2),_=p[0],f=p[1],v=Object(n.useState)(!0),y=Object(c.a)(v,2),E=y[0],h=y[1],O=Object(n.useState)({}),S=Object(c.a)(O,2),I=S[0],k=S[1],N=Object(n.useState)(!0),j=Object(c.a)(N,2),x=j[0],B=j[1],L=Object(n.useCallback)((function(){g()("/topdeals").then((function(e){r(e)}))}),[r]),P=Object(n.useCallback)((function(){g()("/providers").then((function(e){f(e)}))}),[f]);Object(n.useEffect)((function(){L(),P()}),[L,P]);return o.a.createElement(b,null,o.a.createElement(D,{deals:i}),o.a.createElement(U,{searchClick:function(){E?g()("/search",I).then((function(e){m(e),h(!1),B(!1)})):h(!0)},searchDisplay:E,setSearchCriteria:k}),o.a.createElement(C,{deals:u,initial:x}),o.a.createElement(T,{providers:_}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(Z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[21,1,2]]]);
//# sourceMappingURL=main.e4d6d6ae.chunk.js.map